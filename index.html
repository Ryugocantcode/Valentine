<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catch the Falling Hearts</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#ffe4e6;
  font-family:system-ui;
  overflow:hidden;
  transition: background 0.6s;
}

.card{
  background:#fff;
  padding:24px;
  border-radius:20px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
  width:90%;
  max-width:360px;
  position:relative;
  z-index:2;
}

#gameCanvas{
  position:absolute;
  inset:0;
  z-index:1;
  pointer-events:none;
}

.hidden{ display:none; }

button{
  padding:12px 20px;
  border-radius:999px;
  border:none;
  font-size:16px;
  margin-top:10px;
  transition: transform .3s;
}

#yes{ background:#22c55e; color:#fff; }
#no{ background:#ef4444; color:#fff; }
</style>
</head>

<body>

<canvas id="gameCanvas"></canvas>

<!-- GAME -->
<div class="card" id="game">
  <h2>Catch the Hearts ðŸ’—</h2>
  <p>Catch at least 8</p>
  <p id="count">0 / 8</p>
</div>

<!-- CONTINUE -->
<div class="card hidden" id="continueCard">
  <h2>Congratulations ðŸŽ‰</h2>
  <button id="continueBtn">Continue</button>
</div>

<!-- QUESTION -->
<div class="card hidden" id="question">
  <h2>Will you be my Valentine? ðŸ’–</h2>
  <button id="yes">Yes</button>
  <button id="no">No</button>
</div>

<!-- RESULT -->
<div class="card hidden" id="result">
  <h2>I love you Deepa ðŸ’˜</h2>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

canvas.width = innerWidth;
canvas.height = innerHeight;

let hearts = [];
let caught = 0;
const target = 8;

let phase = "catching"; // catching | valentine | done
let cryingMode = false;

// spawn emoji
function spawn(){
  let emoji = "ðŸ’—";
  if(phase === "done") emoji = "ðŸŒ¹";
  if(cryingMode) emoji = "ðŸ˜¢";

  hearts.push({
    x: Math.random() * canvas.width,
    y: -40,
    size: 40,
    speed: 2 + Math.random()*3,
    e: emoji
  });
}

setInterval(spawn, 700);

// draw loop
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  hearts.forEach(h=>{
    h.y += h.speed;
    ctx.font = h.size+"px serif";
    ctx.fillText(h.e, h.x, h.y);
  });
  hearts = hearts.filter(h=>h.y < canvas.height+50);
  requestAnimationFrame(loop);
}
loop();

// catch hearts
canvas.addEventListener("click", e=>{
  hearts.forEach((h,i)=>{
    if(
      e.clientX > h.x &&
      e.clientX < h.x+h.size &&
      e.clientY > h.y-h.size &&
      e.clientY < h.y
    ){
      if(phase==="catching"){
        caught++;
        document.getElementById("count").textContent = `${caught} / ${target}`;
        hearts.splice(i,1);

        if(caught>=target){
          phase="valentine";
          document.getElementById("game").classList.add("hidden");
          document.getElementById("continueCard").classList.remove("hidden");
        }
      }
    }
  });
});

// continue
document.getElementById("continueBtn").onclick=()=>{
  document.getElementById("continueCard").classList.add("hidden");
  document.getElementById("question").classList.remove("hidden");
};

// yes
document.getElementById("yes").onclick=()=>{
  phase="done";
  cryingMode=false;
  document.getElementById("question").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");
};

// no
const noBtn = document.getElementById("no");
const yesBtn = document.getElementById("yes");

noBtn.onclick=()=>{
  document.body.style.background =
    "linear-gradient(#1e293b,#334155,#020617)";

  cryingMode=true;

  yesBtn.style.transform="scale(1.4)";
  setTimeout(()=>yesBtn.style.transform="",400);

  let n=0;
  const shake=setInterval(()=>{
    noBtn.style.transform =
      `translate(${Math.random()*60-30}px,${Math.random()*60-30}px)
       rotate(${Math.random()*30-15}deg)`;
    n++;
    if(n>10){
      clearInterval(shake);
      noBtn.style.transform="";
    }
  },80);
};

onresize=()=>{
  canvas.width=innerWidth;
  canvas.height=innerHeight;
};
</script>

</body>
</html>
